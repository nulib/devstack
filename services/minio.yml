volumes:
  data:
service_definition:
  image: minio/minio
  read_only: true
  volumes:
    - type: volume
      source: <%= volume('data') %>
      target: /data
    - type: volume
      target: /root/.minio
    - type: volume
      target: /tmp
    - type: volume
      target: /var/log
    - type: volume
      target: /var/run
  ports:
    - <%= offset_port(9001) %>:9000
  environment:
    MINIO_ACCESS_KEY: minio
    MINIO_SECRET_KEY: minio123
  command: "server /data"
  healthcheck:
    test:
      - CMD
      - wget
      - "--quiet"
      - "--tries=1"
      - "--spider"
      - http://localhost:9000/minio/health/live
    interval: 30s
    timeout: 5s
    retries: 3
